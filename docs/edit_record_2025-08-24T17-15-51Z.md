# Edit record: Inject uploaded documents into LLM prompt

- session_id: SESSION_20250824_113904_209fb681 (initial code edits snapshot)
- edit_id: EDIT_20250824_114140_923198_0000 (code injection of uploaded documents into prompt)
- docs_edit_id: EDIT_20250824_121401_622585_0000 (docs file update)
- doc_commit: c99dfde
- code_commit: a209432
- recorded_at_utc: 2025-08-24T17:15:51Z

## Summary

This edit session implemented injection of user-uploaded documents into the final LLM prompt and messages for the InfoNinja app.

- Uploaded documents are injected as a system-level context block and the assistant is instructed to treat them as "pages in hand" and may freely discuss and quote from them.
- Default injection: up to 5 most-recent documents (configurable via `MAX_DOCS_TO_INJECT`). Documents are not truncated by default.

## Files changed

- `app.py` — injected documents into `prompt_parts` and `messages` before LLM call. (commit: a209432)
- `docs/last_good_deployment.md` — recorded deployment note and guidance for the model. (commit: c99dfde)

## Validation

- Ran a syntax check on `app.py` (py_compile) — OK.
- Edit tracking commands were used to capture snapshots and log edits as required by repository SOP.

## Next steps

- Optional: run the app and perform an upload + chat smoke test to verify end-to-end behavior.
- Optional: add a unit/smoke test asserting that injected `messages` include a system entry containing uploaded documents prior to the LLM call.

---

Recorded by automated edit-tracker action.
